<div class="fd-has-padding-small container-view">
    <fd-input-group id="inputSearch" #searchinput [button]="true" [placeholder]="'Enter words to search...'" [glyph]="'search'" [placement]="'after'" (addOnButtonClicked)="search(searchinput.inputText)" (keyup.Enter)="search(searchinput.inputText)"></fd-input-group>
    <br>
    <div [attr.aria-busy]="busy$ | async">
        <fd-loading-spinner id="loadingSpinnerSuggestedAndLinked" [loading]="(isSuggestedListBusy$ | async) && (isLinkedListBusy$ | async)"></fd-loading-spinner>
        <div *ngIf="isInit$ | async; else showResultBox">
            <div [hidden]="(isSuggestedListBusy$ | async) && (isLinkedListBusy$ | async)">
                <kb-suggested-list></kb-suggested-list>
                <br>
                <kb-linked-list></kb-linked-list>
            </div>
        </div>

        <ng-template #showResultBox>
            <fd-loading-spinner id="loadingSpinnerSearch" [loading]="busy$ | async"></fd-loading-spinner>
            <div class="search-result">
                <p id="textSearchResultCount">{{totalCount$ | async}} results
                    <a id="linkBackToSuggestions" href="app-kb-search">Back to Suggestions</a>
                </p>
            </div>
            <div *ngIf="isError$ | async; else showResultList">
                <p id="textSearchErrorMsg" class="error-content fd-has-margin-top-small">The server is currently unavailable, please try again later.</p>
            </div>
            <ng-template #showResultList>
                <div fdInfiniteScroll (onScrollAction)="loadMore()" [scrollPercent]="98" class="infinite-scroll-area">
                    <kb-article-list [articles]="articles$ | async"></kb-article-list>
                </div>
            </ng-template>
        </ng-template>
    </div>

</div>